{"ast":null,"code":"import { canUseDOM } from './utils/canUseDOM.esm.js';\nimport { useInsertionEffect } from './useInsertionEffect.esm.js';\nconst insertionFactory = () => {\n  const insertionCache = {};\n  return function insert(renderer, cssRules) {\n    // Even if `useInsertionEffect` is available, we can use it on a client only as it will not be executed in SSR\n    if (useInsertionEffect && canUseDOM()) {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      useInsertionEffect(() => {\n        renderer.insertCSSRules(cssRules);\n      }, [renderer, cssRules]);\n      return;\n    }\n    if (insertionCache[renderer.id] === undefined) {\n      renderer.insertCSSRules(cssRules);\n      insertionCache[renderer.id] = true;\n    }\n  };\n};\nexport { insertionFactory };","map":{"version":3,"names":["insertionFactory","insertionCache","insert","renderer","cssRules","useInsertionEffect","canUseDOM","insertCSSRules","id","undefined"],"sources":["/Users/gideoncrawley/Projects/Lookeeloo/packages/react/src/insertionFactory.ts"],"sourcesContent":["import type { CSSRulesByBucket, GriffelInsertionFactory, GriffelRenderer } from '@griffel/core';\n\nimport { canUseDOM } from './utils/canUseDOM';\nimport { useInsertionEffect } from './useInsertionEffect';\n\nexport const insertionFactory: GriffelInsertionFactory = () => {\n  const insertionCache: Record<string, boolean> = {};\n\n  return function insert(renderer: GriffelRenderer, cssRules: CSSRulesByBucket) {\n    // Even if `useInsertionEffect` is available, we can use it on a client only as it will not be executed in SSR\n    if (useInsertionEffect && canUseDOM()) {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      useInsertionEffect(() => {\n        renderer.insertCSSRules(cssRules!);\n      }, [renderer, cssRules]);\n\n      return;\n    }\n\n    if (insertionCache[renderer.id] === undefined) {\n      renderer.insertCSSRules(cssRules!);\n      insertionCache[renderer.id] = true;\n    }\n  };\n};\n"],"mappings":";;AAKa,MAAAA,gBAAyC,GAAGA,CAAA,KAAM;EAC7D,MAAMC,cAAuC,GAAG,EAAE;EAElD,OAAO,SAASC,MAAMA,CAACC,QAAyB,EAAEC,QAA0B,EAAE;IAC5E;IACA,IAAIC,kBAAkB,IAAIC,SAAS,EAAE,EAAE;MACrC;MACAD,kBAAkB,CAAC,MAAM;QACvBF,QAAQ,CAACI,cAAc,CAACH,QAAS,CAAC;MACpC,CAAC,EAAE,CAACD,QAAQ,EAAEC,QAAQ,CAAC,CAAC;MAExB;IACF;IAEA,IAAIH,cAAc,CAACE,QAAQ,CAACK,EAAE,CAAC,KAAKC,SAAS,EAAE;MAC7CN,QAAQ,CAACI,cAAc,CAACH,QAAS,CAAC;MAClCH,cAAc,CAACE,QAAQ,CAACK,EAAE,CAAC,GAAG,IAAI;IACpC;GACD;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}