{"ast":null,"code":"import hashString from '@emotion/hash';\nimport { convertProperty, convert } from 'rtl-css-js/core';\nimport { RESET_HASH_PREFIX } from '../constants.esm.js';\nimport { isMediaQuerySelector } from './utils/isMediaQuerySelector.esm.js';\nimport { isLayerSelector } from './utils/isLayerSelector.esm.js';\nimport { isNestedSelector } from './utils/isNestedSelector.esm.js';\nimport { isSupportQuerySelector } from './utils/isSupportQuerySelector.esm.js';\nimport { isObject } from './utils/isObject.esm.js';\nimport { hyphenateProperty } from './utils/hyphenateProperty.esm.js';\nimport { normalizePseudoSelector } from './compileAtomicCSSRule.esm.js';\nimport { compileResetCSSRules } from './compileResetCSSRules.esm.js';\nimport { compileKeyframeRule, compileKeyframesCSS } from './compileKeyframeCSS.esm.js';\nimport { isContainerQuerySelector } from './utils/isContainerQuerySelector.esm.js';\nimport { warnAboutUnresolvedRule } from './warnings/warnAboutUnresolvedRule.esm.js';\n\n/**\n * @internal\n */\nfunction createStringFromStyles(styles) {\n  let ltrCSS = '';\n  let rtlCSS = '';\n\n  // eslint-disable-next-line guard-for-in\n  for (const property in styles) {\n    const value = styles[property];\n\n    // eslint-disable-next-line eqeqeq\n    if (value == null) {\n      continue;\n    }\n    if (typeof value === 'string' || typeof value === 'number') {\n      const {\n        key: rtlProperty,\n        value: rtlValue\n      } = convertProperty(property, value);\n      ltrCSS += `${hyphenateProperty(property)}:${value};`;\n      rtlCSS += `${hyphenateProperty(rtlProperty)}:${rtlValue};`;\n      continue;\n    }\n    if (property === 'animationName' && typeof value === 'object') {\n      const values = Array.isArray(value) ? value : [value];\n      const ltrAnimationNames = [];\n      const rtlAnimationNames = [];\n      for (const keyframeObject of values) {\n        const ltrKeyframeRule = compileKeyframeRule(keyframeObject);\n        const rtlKeyframeRule = compileKeyframeRule(convert(keyframeObject));\n        const ltrAnimationName = RESET_HASH_PREFIX + hashString(ltrKeyframeRule);\n        const rtlAnimationName = RESET_HASH_PREFIX + hashString(rtlKeyframeRule);\n        ltrAnimationNames.push(ltrAnimationName);\n        rtlAnimationNames.push(rtlAnimationName);\n        ltrCSS += compileKeyframesCSS(ltrAnimationName, ltrKeyframeRule).join('');\n        if (ltrAnimationName !== rtlAnimationName) {\n          rtlCSS += compileKeyframesCSS(rtlAnimationName, rtlKeyframeRule).join('');\n        }\n      }\n      ltrCSS += `animation-name:${ltrAnimationNames.join(',')};`;\n      rtlCSS += `animation-name:${rtlAnimationNames.join(',')};`;\n      continue;\n    }\n    if (Array.isArray(value)) {\n      // not animationName property but array in the value => fallback values\n      if (value.length === 0) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(`makeResetStyles(): An empty array was passed as input to \"${property}\", the property will be omitted in the styles.`);\n        }\n        continue;\n      }\n      const rtlDefinitions = value.map(v => convertProperty(property, v));\n      const rtlPropertyConsistent = !rtlDefinitions.some(v => v.key !== rtlDefinitions[0].key);\n      if (!rtlPropertyConsistent) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.error('makeStyles(): mixing CSS fallback values which result in multiple CSS properties in RTL is not supported.');\n        }\n        continue;\n      }\n      const rtlProperty = rtlDefinitions[0].key;\n      ltrCSS += value.map(v => `${hyphenateProperty(property)}:${v};`).join('');\n      rtlCSS += rtlDefinitions.map(definition => `${hyphenateProperty(rtlProperty)}:${definition.value};`).join('');\n      continue;\n    }\n    if (isObject(value)) {\n      if (isNestedSelector(property)) {\n        const nestedSelector = normalizePseudoSelector(property);\n        const [ltrNested, rtlNested] = createStringFromStyles(value);\n        ltrCSS += `${nestedSelector}{${ltrNested}}`;\n        rtlCSS += `${nestedSelector}{${rtlNested}}`;\n        continue;\n      }\n      if (isMediaQuerySelector(property) || isLayerSelector(property) || isSupportQuerySelector(property) || isContainerQuerySelector(property)) {\n        const [ltrNested, rtlNested] = createStringFromStyles(value);\n        ltrCSS += `${property}{${ltrNested}}`;\n        rtlCSS += `${property}{${rtlNested}}`;\n        continue;\n      }\n    }\n    warnAboutUnresolvedRule(property, value);\n  }\n  return [ltrCSS, rtlCSS];\n}\n\n/**\n * @internal\n */\nfunction resolveResetStyleRules(styles) {\n  const [ltrRule, rtlRule] = createStringFromStyles(styles);\n  const ltrClassName = RESET_HASH_PREFIX + hashString(ltrRule);\n  const [ltrCSS, ltrCSSAtRules] = compileResetCSSRules(`.${ltrClassName}{${ltrRule}}`);\n  const hasAtRules = ltrCSSAtRules.length > 0;\n  if (ltrRule === rtlRule) {\n    return [ltrClassName, null, hasAtRules ? {\n      r: ltrCSS,\n      s: ltrCSSAtRules\n    } : ltrCSS];\n  }\n  const rtlClassName = RESET_HASH_PREFIX + hashString(rtlRule);\n  const [rtlCSS, rtlCSSAtRules] = compileResetCSSRules(`.${rtlClassName}{${rtlRule}}`);\n  return [ltrClassName, rtlClassName, hasAtRules ? {\n    r: ltrCSS.concat(rtlCSS),\n    s: ltrCSSAtRules.concat(rtlCSSAtRules)\n  } : ltrCSS.concat(rtlCSS)];\n}\nexport { resolveResetStyleRules };","map":{"version":3,"names":["createStringFromStyles","styles","ltrCSS","rtlCSS","property","value","key","rtlProperty","rtlValue","convertProperty","hyphenateProperty","values","Array","isArray","ltrAnimationNames","rtlAnimationNames","keyframeObject","ltrKeyframeRule","compileKeyframeRule","rtlKeyframeRule","convert","ltrAnimationName","RESET_HASH_PREFIX","hashString","rtlAnimationName","push","compileKeyframesCSS","join","length","process","env","NODE_ENV","console","warn","rtlDefinitions","map","v","rtlPropertyConsistent","some","error","definition","isObject","isNestedSelector","nestedSelector","normalizePseudoSelector","ltrNested","rtlNested","isMediaQuerySelector","isLayerSelector","isSupportQuerySelector","isContainerQuerySelector","warnAboutUnresolvedRule","resolveResetStyleRules","ltrRule","rtlRule","ltrClassName","ltrCSSAtRules","compileResetCSSRules","hasAtRules","r","s","rtlClassName","rtlCSSAtRules","concat"],"sources":["/Users/gideoncrawley/Projects/Lookeeloo/packages/core/src/runtime/resolveResetStyleRules.ts"],"sourcesContent":["import hashString from '@emotion/hash';\nimport type { GriffelResetStyle, GriffelAnimation } from '@griffel/style-types';\nimport { convert, convertProperty } from 'rtl-css-js/core';\n\nimport { RESET_HASH_PREFIX } from '../constants';\nimport type { CSSRulesByBucket } from '../types';\nimport { isMediaQuerySelector } from './utils/isMediaQuerySelector';\nimport { isLayerSelector } from './utils/isLayerSelector';\nimport { isNestedSelector } from './utils/isNestedSelector';\nimport { isSupportQuerySelector } from './utils/isSupportQuerySelector';\nimport { isObject } from './utils/isObject';\nimport { hyphenateProperty } from './utils/hyphenateProperty';\nimport { normalizePseudoSelector } from './compileAtomicCSSRule';\nimport { compileResetCSSRules } from './compileResetCSSRules';\nimport { compileKeyframeRule, compileKeyframesCSS } from './compileKeyframeCSS';\nimport { isContainerQuerySelector } from './utils/isContainerQuerySelector';\nimport { warnAboutUnresolvedRule } from './warnings/warnAboutUnresolvedRule';\n\n/**\n * @internal\n */\nfunction createStringFromStyles(styles: GriffelResetStyle) {\n  let ltrCSS = '';\n  let rtlCSS = '';\n\n  // eslint-disable-next-line guard-for-in\n  for (const property in styles) {\n    const value = styles[property as keyof GriffelResetStyle];\n\n    // eslint-disable-next-line eqeqeq\n    if (value == null) {\n      continue;\n    }\n\n    if (typeof value === 'string' || typeof value === 'number') {\n      const { key: rtlProperty, value: rtlValue } = convertProperty(property, value);\n\n      ltrCSS += `${hyphenateProperty(property)}:${value};`;\n      rtlCSS += `${hyphenateProperty(rtlProperty)}:${rtlValue};`;\n\n      continue;\n    }\n\n    if (property === 'animationName' && typeof value === 'object') {\n      const values = Array.isArray(value) ? (value as GriffelAnimation[]) : [value as GriffelAnimation];\n\n      const ltrAnimationNames: string[] = [];\n      const rtlAnimationNames: string[] = [];\n\n      for (const keyframeObject of values) {\n        const ltrKeyframeRule = compileKeyframeRule(keyframeObject);\n        const rtlKeyframeRule = compileKeyframeRule(convert(keyframeObject));\n\n        const ltrAnimationName = RESET_HASH_PREFIX + hashString(ltrKeyframeRule);\n        const rtlAnimationName = RESET_HASH_PREFIX + hashString(rtlKeyframeRule);\n\n        ltrAnimationNames.push(ltrAnimationName);\n        rtlAnimationNames.push(rtlAnimationName);\n\n        ltrCSS += compileKeyframesCSS(ltrAnimationName, ltrKeyframeRule).join('');\n\n        if (ltrAnimationName !== rtlAnimationName) {\n          rtlCSS += compileKeyframesCSS(rtlAnimationName, rtlKeyframeRule).join('');\n        }\n      }\n\n      ltrCSS += `animation-name:${ltrAnimationNames.join(',')};`;\n      rtlCSS += `animation-name:${rtlAnimationNames.join(',')};`;\n\n      continue;\n    }\n\n    if (Array.isArray(value)) {\n      // not animationName property but array in the value => fallback values\n      if (value.length === 0) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            `makeResetStyles(): An empty array was passed as input to \"${property}\", the property will be omitted in the styles.`,\n          );\n        }\n        continue;\n      }\n\n      const rtlDefinitions = value.map(v => convertProperty(property, v!));\n      const rtlPropertyConsistent = !rtlDefinitions.some(v => v.key !== rtlDefinitions[0].key);\n\n      if (!rtlPropertyConsistent) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.error(\n            'makeStyles(): mixing CSS fallback values which result in multiple CSS properties in RTL is not supported.',\n          );\n        }\n        continue;\n      }\n\n      const rtlProperty = rtlDefinitions[0].key;\n\n      ltrCSS += value.map(v => `${hyphenateProperty(property)}:${v};`).join('');\n      rtlCSS += rtlDefinitions.map(definition => `${hyphenateProperty(rtlProperty)}:${definition.value};`).join('');\n\n      continue;\n    }\n\n    if (isObject(value)) {\n      if (isNestedSelector(property)) {\n        const nestedSelector = normalizePseudoSelector(property);\n        const [ltrNested, rtlNested] = createStringFromStyles(value);\n\n        ltrCSS += `${nestedSelector}{${ltrNested}}`;\n        rtlCSS += `${nestedSelector}{${rtlNested}}`;\n\n        continue;\n      }\n\n      if (\n        isMediaQuerySelector(property) ||\n        isLayerSelector(property) ||\n        isSupportQuerySelector(property) ||\n        isContainerQuerySelector(property)\n      ) {\n        const [ltrNested, rtlNested] = createStringFromStyles(value);\n\n        ltrCSS += `${property}{${ltrNested}}`;\n        rtlCSS += `${property}{${rtlNested}}`;\n\n        continue;\n      }\n    }\n\n    warnAboutUnresolvedRule(property, value as GriffelResetStyle);\n  }\n\n  return [ltrCSS, rtlCSS];\n}\n\n/**\n * @internal\n */\nexport function resolveResetStyleRules(\n  styles: GriffelResetStyle,\n): [string, string | null, CSSRulesByBucket | string[]] {\n  const [ltrRule, rtlRule] = createStringFromStyles(styles);\n\n  const ltrClassName = RESET_HASH_PREFIX + hashString(ltrRule);\n  const [ltrCSS, ltrCSSAtRules] = compileResetCSSRules(`.${ltrClassName}{${ltrRule}}`);\n\n  const hasAtRules = ltrCSSAtRules.length > 0;\n\n  if (ltrRule === rtlRule) {\n    return [ltrClassName, null, hasAtRules ? { r: ltrCSS, s: ltrCSSAtRules } : ltrCSS];\n  }\n\n  const rtlClassName = RESET_HASH_PREFIX + hashString(rtlRule);\n  const [rtlCSS, rtlCSSAtRules] = compileResetCSSRules(`.${rtlClassName}{${rtlRule}}`);\n\n  return [\n    ltrClassName,\n    rtlClassName,\n    hasAtRules ? { r: ltrCSS.concat(rtlCSS), s: ltrCSSAtRules.concat(rtlCSSAtRules) } : ltrCSS.concat(rtlCSS),\n  ];\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}